<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://storage.googleapis.com/nextjournal-cas-eu/data/8VxQBDwk3cvr1bt8YVL5m6bJGrFEmzrSbCrH1roypLjJr4AbbteCKh9Y6gQVYexdY85QA2HG5nQFLWpRp69zFSPDJ9" rel="stylesheet" type="text/css"><link href="https://storage.googleapis.com/nextjournal-cas-eu/data/8VxoxUgsBRs2yjjBBcfeCc8XigM7erXHmjJg2tjdGxNBxwTYuDonuYswXqRStaCA2b3rTEPCgPwixJmAVrea1qAHHU" rel="stylesheet" type="text/css"><script src="https://storage.googleapis.com/nextjournal-cas-eu/data/8VujAQ3bHzgNYiC3C61DJwUmXP7xW6bB8tT92xAKhDyu5vXReakaHVSrqJfurggZdCJVuAf3B7AujNBvkJAcz974uH" type="text/javascript"></script></head><body><div id="clerk"></div><script>let viewer = nextjournal.clerk.sci_viewer
let doc = "{:nextjournal/value [{:nextjournal/value \"# [Day 16](https://adventofcode.com/2021/day/16)\\n\", :nextjournal/viewer :markdown} {:nextjournal/value \"(ns advent-of-code-2021.day16\\n  (:require [clojure.java.io :as io]\\n            [clojure.set :as sets]\\n            [clojure.string :as string]\\n            [nextjournal.clerk :as clerk]\\n            [nextjournal.clerk.viewer :as v])\\n  (:import [java.io StringReader]))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value nil, :nextjournal/viewer {:pred #function+ \\\"ojure.core$nil_QMARK_ 0x2670435 \\\\\\\"clojure.core$nil_QMARK_@2670435\\\\\\\"\\\", :fn #function+ (fn [_] (v/html [:span.syntax-nil.inspected-value \\\"nil\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(def real-input (slurp (io/resource \\\"day16.txt\\\")))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value [\\\"C20D42002ED333E7774EAAC3C2009670015692C61B65892239803536C53E2D307A600ACF324928380133D18361005B336D36\\\" {:nextjournal/value {:path [], :count 1313, :offset 100, :remaining 1213}, :nextjournal/viewer :elision}], :replace-path [0], :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(def hex-digit->bin-str\\n  {\\\\0 \\\"0000\\\"\\n   \\\\1 \\\"0001\\\"\\n   \\\\2 \\\"0010\\\"\\n   \\\\3 \\\"0011\\\"\\n   \\\\4 \\\"0100\\\"\\n   \\\\5 \\\"0101\\\"\\n   \\\\6 \\\"0110\\\"\\n   \\\\7 \\\"0111\\\"\\n   \\\\8 \\\"1000\\\"\\n   \\\\9 \\\"1001\\\"\\n   \\\\A \\\"1010\\\"\\n   \\\\B \\\"1011\\\"\\n   \\\\C \\\"1100\\\"\\n   \\\\D \\\"1101\\\"\\n   \\\\E \\\"1110\\\"\\n   \\\\F \\\"1111\\\"})\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value [{:path [0], :nextjournal/value [{:path [0 0], :nextjournal/value \\\\0, :nextjournal/viewer nil} {:path [0 1], :nextjournal/value \\\"0000\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [1], :nextjournal/value [{:path [1 0], :nextjournal/value \\\\1, :nextjournal/viewer nil} {:path [1 1], :nextjournal/value \\\"0001\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [2], :nextjournal/value [{:path [2 0], :nextjournal/value \\\\2, :nextjournal/viewer nil} {:path [2 1], :nextjournal/value \\\"0010\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [3], :nextjournal/value [{:path [3 0], :nextjournal/value \\\\3, :nextjournal/viewer nil} {:path [3 1], :nextjournal/value \\\"0011\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [4], :nextjournal/value [{:path [4 0], :nextjournal/value \\\\4, :nextjournal/viewer nil} {:path [4 1], :nextjournal/value \\\"0100\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [5], :nextjournal/value [{:path [5 0], :nextjournal/value \\\\5, :nextjournal/viewer nil} {:path [5 1], :nextjournal/value \\\"0101\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [6], :nextjournal/value [{:path [6 0], :nextjournal/value \\\\6, :nextjournal/viewer nil} {:path [6 1], :nextjournal/value \\\"0110\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [7], :nextjournal/value [{:path [7 0], :nextjournal/value \\\\7, :nextjournal/viewer nil} {:path [7 1], :nextjournal/value \\\"0111\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [8], :nextjournal/value [{:path [8 0], :nextjournal/value \\\\8, :nextjournal/viewer nil} {:path [8 1], :nextjournal/value \\\"1000\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [9], :nextjournal/value [{:path [9 0], :nextjournal/value \\\\9, :nextjournal/viewer nil} {:path [9 1], :nextjournal/value \\\"1001\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:nextjournal/value {:count 16, :offset 10, :path [], :remaining 6}, :nextjournal/viewer :elision}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_QMARK___5429 0x64110f88 \\\\\\\"clojure.core$map_QMARK___5429@64110f88\\\\\\\"\\\", :name :map, :fn #function+ v/map-viewer, :fetch-opts {:n 10}, :closing-parens (\\\"}\\\")}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn read-input\\n  [input]\\n  (apply str (map #(hex-digit->bin-str %) input)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$read_input 0x5a52a74 \\\\\\\"advent_of_code_2021.day16$read_input@5a52a74\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn bin->dec\\n  [bin]\\n  (Long/valueOf bin 2))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$bin__GT_dec 0x20a62460 \\\\\\\"advent_of_code_2021.day16$bin__GT_dec@20a62460\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn read-n-bits\\n  [rdr n]\\n  (reduce (fn [s _]\\n            (str s (char (.read rdr))))\\n          \\\"\\\"\\n          (range n)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$read_n_bits 0x425e8526 \\\\\\\"advent_of_code_2021.day16$read_n_bits@425e8526\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn read-version\\n  [rdr]\\n  (bin->dec (read-n-bits rdr 3)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$read_version 0x76f4af86 \\\\\\\"advent_of_code_2021.day16$read_version@76f4af86\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(def literal-packet-type-id 4)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value 4, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn read-type-id\\n  [rdr]\\n  (bin->dec (read-n-bits rdr 3)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$read_type_id 0x5a2edda6 \\\\\\\"advent_of_code_2021.day16$read_type_id@5a2edda6\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn read-literal\\n  [rdr]\\n  (loop [word (read-n-bits rdr 5)\\n         bits \\\"\\\"]\\n    (let [next-bits (apply str bits (rest word))]\\n      (if (= \\\\0 (first word))\\n        (bin->dec next-bits)\\n        (recur (read-n-bits rdr 5) next-bits)))))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$read_literal 0x4b3a77a7 \\\\\\\"advent_of_code_2021.day16$read_literal@4b3a77a7\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn read-op-len\\n  [rdr]\\n  (let [len-type (read-n-bits rdr 1)\\n        len (read-n-bits rdr (if (= len-type \\\"0\\\") 15 11))]\\n    {:len-type (if (= len-type \\\"0\\\") :bits :packets)\\n     :len (bin->dec len)}))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$read_op_len 0x7dfbac53 \\\\\\\"advent_of_code_2021.day16$read_op_len@7dfbac53\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(declare parse-packet)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value #object[clojure.lang.Var$Unbound 0x9252756 \\\"Unbound: #'advent-of-code-2021.day16/parse-packet\\\"], :nextjournal/viewer nil}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(declare parse-packet*)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value #object[clojure.lang.Var$Unbound 0x1a0f2919 \\\"Unbound: #'advent-of-code-2021.day16/parse-packet*\\\"], :nextjournal/viewer nil}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn has-more?\\n  [rdr]\\n  (.mark rdr 1)\\n  (let [c (.read rdr)]\\n    (if (= -1 c)\\n      false\\n      (do (.reset rdr)\\n          true))))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$has_more_QMARK_ 0x2ea0b4f5 \\\\\\\"advent_of_code_2021.day16$has_more_QMARK_@2ea0b4f5\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn read-subpackets-bit-count\\n  [rdr len]\\n  (loop [rdr (StringReader. (read-n-bits rdr len))\\n         packets []]\\n    (if (has-more? rdr)\\n      (recur rdr (conj packets (parse-packet* rdr)))\\n      packets)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$read_subpackets_bit_count 0x24f8f6a \\\\\\\"advent_of_code_2021.day16$read_subpackets_bit_count@24f8f6a\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn read-subpackets-pack-count\\n  [rdr pack-count]\\n  (mapv (fn [_]\\n          (parse-packet* rdr))\\n        (range pack-count)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$read_subpackets_pack_count 0x1ad057cb \\\\\\\"advent_of_code_2021.day16$read_subpackets_pack_count@1ad057cb\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn read-operator\\n  [rdr]\\n  (let [{:keys [len-type len]} (read-op-len rdr)]\\n    (case len-type\\n      :bits (read-subpackets-bit-count rdr len)\\n      :packets (read-subpackets-pack-count rdr len))))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$read_operator 0x3ae9e9f6 \\\\\\\"advent_of_code_2021.day16$read_operator@3ae9e9f6\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn read-body\\n  [tid rdr]\\n  (if (= literal-packet-type-id tid)\\n    (read-literal rdr)\\n    (read-operator rdr)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$read_body 0x1145f542 \\\\\\\"advent_of_code_2021.day16$read_body@1145f542\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn parse-packet*\\n  [rdr]\\n  (let [v (read-version rdr)\\n        tid (read-type-id rdr)\\n        body (read-body tid rdr)]\\n    {:version v\\n     :packet-type tid\\n     :body body}))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$parse_packet_STAR_ 0x6f8f0cdf \\\\\\\"advent_of_code_2021.day16$parse_packet_STAR_@6f8f0cdf\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn parse-packet\\n  [bits]\\n  (parse-packet* (StringReader. bits)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$parse_packet 0x77f960ea \\\\\\\"advent_of_code_2021.day16$parse_packet@77f960ea\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn sum-version-nums\\n  [{:keys [version packet-type body]}]\\n  (if (= literal-packet-type-id packet-type)\\n    version\\n    (reduce (fn [sum packet]\\n              (+ sum (sum-version-nums packet)))\\n            version\\n            body)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$sum_version_nums 0x22a91ba \\\\\\\"advent_of_code_2021.day16$sum_version_nums@22a91ba\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn solve-part1\\n  [hex]\\n  (-> (read-input hex)\\n      (parse-packet)\\n      (sum-version-nums)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$solve_part1 0x3c7b9b58 \\\\\\\"advent_of_code_2021.day16$solve_part1@3c7b9b58\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(solve-part1 real-input)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value 943, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(def packet-types\\n  {0 :sum\\n   1 :product\\n   2 :min\\n   3 :max\\n   literal-packet-type-id :literal\\n   5 :>\\n   6 :<\\n   7 :=})\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value [{:path [0], :nextjournal/value [{:path [0 0], :nextjournal/value 0, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}} {:path [0 1], :nextjournal/value :sum, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [1], :nextjournal/value [{:path [1 0], :nextjournal/value 1, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}} {:path [1 1], :nextjournal/value :product, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [2], :nextjournal/value [{:path [2 0], :nextjournal/value 2, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}} {:path [2 1], :nextjournal/value :min, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [3], :nextjournal/value [{:path [3 0], :nextjournal/value 3, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}} {:path [3 1], :nextjournal/value :max, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [4], :nextjournal/value [{:path [4 0], :nextjournal/value 4, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}} {:path [4 1], :nextjournal/value :literal, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [5], :nextjournal/value [{:path [5 0], :nextjournal/value 5, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}} {:path [5 1], :nextjournal/value :>, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [6], :nextjournal/value [{:path [6 0], :nextjournal/value 6, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}} {:path [6 1], :nextjournal/value :<, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}} {:path [7], :nextjournal/value [{:path [7 0], :nextjournal/value 7, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}} {:path [7 1], :nextjournal/value :=, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_entry_QMARK_ 0x34e8256b \\\\\\\"clojure.core$map_entry_QMARK_@34e8256b\\\\\\\"\\\", :name :map-entry, :fn #function+ (fn [xs opts] (v/html (into [:<>] (comp (v/inspect-children opts) (interpose \\\" \\\")) xs))), :fetch-opts {:n 2}}}], :nextjournal/viewer {:pred #function+ \\\"ojure.core$map_QMARK___5429 0x64110f88 \\\\\\\"clojure.core$map_QMARK___5429@64110f88\\\\\\\"\\\", :name :map, :fn #function+ v/map-viewer, :fetch-opts {:n 10}, :closing-parens (\\\"}\\\")}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(def eval-packet nil)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value nil, :nextjournal/viewer {:pred #function+ \\\"ojure.core$nil_QMARK_ 0x2670435 \\\\\\\"clojure.core$nil_QMARK_@2670435\\\\\\\"\\\", :fn #function+ (fn [_] (v/html [:span.syntax-nil.inspected-value \\\"nil\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defmulti eval-packet\\n  (fn [{:keys [packet-type] :as packet}]\\n    (get packet-types packet-type)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value #object[clojure.lang.MultiFn 0x2b8591fc \\\"clojure.lang.MultiFn@2b8591fc\\\"], :nextjournal/viewer nil}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defmethod eval-packet :literal\\n  [{:keys [body]}]\\n  body)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value #object[clojure.lang.MultiFn 0x2b8591fc \\\"clojure.lang.MultiFn@2b8591fc\\\"], :nextjournal/viewer nil}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn eval-reduce-body\\n  [f init body]\\n  (reduce (fn [acc packet]\\n            (f acc (eval-packet packet)))\\n          init\\n          body))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$eval_reduce_body 0x17c74a56 \\\\\\\"advent_of_code_2021.day16$eval_reduce_body@17c74a56\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defmethod eval-packet :sum\\n  [{:keys [body]}]\\n  (eval-reduce-body + 0 body))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value #object[clojure.lang.MultiFn 0x2b8591fc \\\"clojure.lang.MultiFn@2b8591fc\\\"], :nextjournal/viewer nil}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defmethod eval-packet :product\\n  [{:keys [body]}]\\n  (eval-reduce-body * 1 body))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value #object[clojure.lang.MultiFn 0x2b8591fc \\\"clojure.lang.MultiFn@2b8591fc\\\"], :nextjournal/viewer nil}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defmethod eval-packet :min\\n  [{:keys [body]}]\\n  (eval-reduce-body min Long/MAX_VALUE body))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value #object[clojure.lang.MultiFn 0x2b8591fc \\\"clojure.lang.MultiFn@2b8591fc\\\"], :nextjournal/viewer nil}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defmethod eval-packet :max\\n  [{:keys [body]}]\\n  (eval-reduce-body max Long/MIN_VALUE body))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value #object[clojure.lang.MultiFn 0x2b8591fc \\\"clojure.lang.MultiFn@2b8591fc\\\"], :nextjournal/viewer nil}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn eval-predicate\\n  [f {[x y] :body}]\\n  (if (f (eval-packet x) (eval-packet y)) 1 0))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$eval_predicate 0x4136ae55 \\\\\\\"advent_of_code_2021.day16$eval_predicate@4136ae55\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defmethod eval-packet :>\\n  [body]\\n  (eval-predicate > body))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value #object[clojure.lang.MultiFn 0x2b8591fc \\\"clojure.lang.MultiFn@2b8591fc\\\"], :nextjournal/viewer nil}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defmethod eval-packet :<\\n  [body]\\n  (eval-predicate < body))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value #object[clojure.lang.MultiFn 0x2b8591fc \\\"clojure.lang.MultiFn@2b8591fc\\\"], :nextjournal/viewer nil}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defmethod eval-packet :=\\n  [body]\\n  (eval-predicate = body))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value #object[clojure.lang.MultiFn 0x2b8591fc \\\"clojure.lang.MultiFn@2b8591fc\\\"], :nextjournal/viewer nil}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn solve-part2\\n  [input]\\n  (-> (read-input input)\\n      (parse-packet)\\n      (eval-packet)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day16$solve_part2 0x21f75c70 \\\\\\\"advent_of_code_2021.day16$solve_part2@21f75c70\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(solve-part2 real-input)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value 167737115857, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}}\"}, :nextjournal/viewer :clerk/inline-result}], :nextjournal/viewer :clerk/notebook, :scope {:namespace :advent-of-code-2021.day16}}"
viewer.reset_doc(viewer.read_string(doc))
viewer.mount(document.getElementById('clerk'))
</script></body></html>