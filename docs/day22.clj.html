<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://storage.googleapis.com/nextjournal-cas-eu/data/8VxQBDwk3cvr1bt8YVL5m6bJGrFEmzrSbCrH1roypLjJr4AbbteCKh9Y6gQVYexdY85QA2HG5nQFLWpRp69zFSPDJ9" rel="stylesheet" type="text/css"><link href="https://storage.googleapis.com/nextjournal-cas-eu/data/8VxoxUgsBRs2yjjBBcfeCc8XigM7erXHmjJg2tjdGxNBxwTYuDonuYswXqRStaCA2b3rTEPCgPwixJmAVrea1qAHHU" rel="stylesheet" type="text/css"><script src="https://storage.googleapis.com/nextjournal-cas-eu/data/8VujAQ3bHzgNYiC3C61DJwUmXP7xW6bB8tT92xAKhDyu5vXReakaHVSrqJfurggZdCJVuAf3B7AujNBvkJAcz974uH" type="text/javascript"></script></head><body><div id="clerk"></div><script>let viewer = nextjournal.clerk.sci_viewer
let doc = "{:nextjournal/value [{:nextjournal/value \"# [Day 22](https://adventofcode.com/2021/day/22)\\n\", :nextjournal/viewer :markdown} {:nextjournal/value \"(ns advent-of-code-2021.day22\\n  (:require [clojure.java.io :as io]\\n            [clojure.spec.alpha :as spec]\\n            [clojure.string :as string]\\n            [nextjournal.clerk :as clerk]\\n            [nextjournal.clerk.viewer :as v]))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value nil, :nextjournal/viewer {:pred #function+ \\\"ojure.core$nil_QMARK_ 0x2670435 \\\\\\\"clojure.core$nil_QMARK_@2670435\\\\\\\"\\\", :fn #function+ (fn [_] (v/html [:span.syntax-nil.inspected-value \\\"nil\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \" I tried several solutions. A couple turned out to be theoretically unsound.\\n One seemed to be theoretically sound but was too complicated. Finally, after\\n many many failures I broke down to see what others had done and found \\n [this blog post](https://todd.ginsberg.com/post/advent-of-code/2021/day22/)\\n that solves the problem by introducing negative volume. The way it works is\\n that a cuboid can have a positive or negative volume. Each cuboid from the \\n input is processed in order while maintaining a list of cuboids that, when\\n their volumes are summed, represents the \\\"on\\\" volume so far. When each cuboid\\n from the input is processed it is compared to those cuboids currently in\\n the list. Only those that have an intersection are considered. A new cuboid\\n is calculated and is added to the list at the end of each step. The new\\n cuboid is the intersection of the two with a sign as shown in the following\\n table. In the case that the input cuboid is \\\"on\\\" then it is also added to the\\n list.\\n \\n | input cuboid sign | list cuboid sign | new list cuboid sign                                  |\\n |-------------------|------------------|-------------------------------------------------------|\\n | +                 | +                | - , so overlapping \\\"on\\\" regions aren't counted twice  |\\n | +                 | -                | + , turn \\\"on\\\" cubes that were previously \\\"off\\\"        |\\n | -                 | +                | - , turn \\\"off\\\" cubes that were previously \\\"on\\\"        |\\n | -                 | -                | + , so overlapping \\\"off\\\" regions aren't counted twice |\\n\\n\\n\", :nextjournal/viewer :markdown} {:nextjournal/value \"(def test-input\\n  \\\"on x=10..12,y=10..12,z=10..12\\non x=11..13,y=11..13,z=11..13\\noff x=9..11,y=9..11,z=9..11\\non x=10..10,y=10..10,z=10..10\\\")\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value [\\\"on x=10..12,y=10..12,z=10..12\\\\non x=11..13,y=11..13,z=11..13\\\\noff x=9..11,y=9..11,z=9..11\\\\non x=10..10,\\\" {:nextjournal/value {:path [], :count 117, :offset 100, :remaining 17}, :nextjournal/viewer :elision}], :replace-path [0], :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(def test-input2\\n  \\\"on x=-20..26,y=-36..17,z=-47..7\\non x=-20..33,y=-21..23,z=-26..28\\non x=-22..28,y=-29..23,z=-38..16\\non x=-46..7,y=-6..46,z=-50..-1\\non x=-49..1,y=-3..46,z=-24..28\\non x=2..47,y=-22..22,z=-23..27\\non x=-27..23,y=-28..26,z=-21..29\\non x=-39..5,y=-6..47,z=-3..44\\non x=-30..21,y=-8..43,z=-13..34\\non x=-22..26,y=-27..20,z=-29..19\\noff x=-48..-32,y=26..41,z=-47..-37\\non x=-12..35,y=6..50,z=-50..-2\\noff x=-48..-32,y=-32..-16,z=-15..-5\\non x=-18..26,y=-33..15,z=-7..46\\noff x=-40..-22,y=-38..-28,z=23..41\\non x=-16..35,y=-41..10,z=-47..6\\noff x=-32..-23,y=11..30,z=-14..3\\non x=-49..-5,y=-3..45,z=-29..18\\noff x=18..30,y=-20..-8,z=-3..13\\non x=-41..9,y=-7..43,z=-33..15\\non x=-54112..-39298,y=-85059..-49293,z=-27449..7877\\non x=967..23432,y=45373..81175,z=27513..53682\\\")\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value [\\\"on x=-20..26,y=-36..17,z=-47..7\\\\non x=-20..33,y=-21..23,z=-26..28\\\\non x=-22..28,y=-29..23,z=-38..16\\\\non\\\" {:nextjournal/value {:path [], :count 745, :offset 100, :remaining 645}, :nextjournal/viewer :elision}], :replace-path [0], :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(def test-input3\\n  \\\"on x=-5..47,y=-31..22,z=-19..33\\non x=-44..5,y=-27..21,z=-14..35\\non x=-49..-1,y=-11..42,z=-10..38\\non x=-20..34,y=-40..6,z=-44..1\\noff x=26..39,y=40..50,z=-2..11\\non x=-41..5,y=-41..6,z=-36..8\\noff x=-43..-33,y=-45..-28,z=7..25\\non x=-33..15,y=-32..19,z=-34..11\\noff x=35..47,y=-46..-34,z=-11..5\\non x=-14..36,y=-6..44,z=-16..29\\non x=-57795..-6158,y=29564..72030,z=20435..90618\\non x=36731..105352,y=-21140..28532,z=16094..90401\\non x=30999..107136,y=-53464..15513,z=8553..71215\\non x=13528..83982,y=-99403..-27377,z=-24141..23996\\non x=-72682..-12347,y=18159..111354,z=7391..80950\\non x=-1060..80757,y=-65301..-20884,z=-103788..-16709\\non x=-83015..-9461,y=-72160..-8347,z=-81239..-26856\\non x=-52752..22273,y=-49450..9096,z=54442..119054\\non x=-29982..40483,y=-108474..-28371,z=-24328..38471\\non x=-4958..62750,y=40422..118853,z=-7672..65583\\non x=55694..108686,y=-43367..46958,z=-26781..48729\\non x=-98497..-18186,y=-63569..3412,z=1232..88485\\non x=-726..56291,y=-62629..13224,z=18033..85226\\non x=-110886..-34664,y=-81338..-8658,z=8914..63723\\non x=-55829..24974,y=-16897..54165,z=-121762..-28058\\non x=-65152..-11147,y=22489..91432,z=-58782..1780\\non x=-120100..-32970,y=-46592..27473,z=-11695..61039\\non x=-18631..37533,y=-124565..-50804,z=-35667..28308\\non x=-57817..18248,y=49321..117703,z=5745..55881\\non x=14781..98692,y=-1341..70827,z=15753..70151\\non x=-34419..55919,y=-19626..40991,z=39015..114138\\non x=-60785..11593,y=-56135..2999,z=-95368..-26915\\non x=-32178..58085,y=17647..101866,z=-91405..-8878\\non x=-53655..12091,y=50097..105568,z=-75335..-4862\\non x=-111166..-40997,y=-71714..2688,z=5609..50954\\non x=-16602..70118,y=-98693..-44401,z=5197..76897\\non x=16383..101554,y=4615..83635,z=-44907..18747\\noff x=-95822..-15171,y=-19987..48940,z=10804..104439\\non x=-89813..-14614,y=16069..88491,z=-3297..45228\\non x=41075..99376,y=-20427..49978,z=-52012..13762\\non x=-21330..50085,y=-17944..62733,z=-112280..-30197\\non x=-16478..35915,y=36008..118594,z=-7885..47086\\noff x=-98156..-27851,y=-49952..43171,z=-99005..-8456\\noff x=2032..69770,y=-71013..4824,z=7471..94418\\non x=43670..120875,y=-42068..12382,z=-24787..38892\\noff x=37514..111226,y=-45862..25743,z=-16714..54663\\noff x=25699..97951,y=-30668..59918,z=-15349..69697\\noff x=-44271..17935,y=-9516..60759,z=49131..112598\\non x=-61695..-5813,y=40978..94975,z=8655..80240\\noff x=-101086..-9439,y=-7088..67543,z=33935..83858\\noff x=18020..114017,y=-48931..32606,z=21474..89843\\noff x=-77139..10506,y=-89994..-18797,z=-80..59318\\noff x=8476..79288,y=-75520..11602,z=-96624..-24783\\non x=-47488..-1262,y=24338..100707,z=16292..72967\\noff x=-84341..13987,y=2429..92914,z=-90671..-1318\\noff x=-37810..49457,y=-71013..-7894,z=-105357..-13188\\noff x=-27365..46395,y=31009..98017,z=15428..76570\\noff x=-70369..-16548,y=22648..78696,z=-1892..86821\\non x=-53470..21291,y=-120233..-33476,z=-44150..38147\\noff x=-93533..-4276,y=-16170..68771,z=-104985..-24507\\\")\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value [\\\"on x=-5..47,y=-31..22,z=-19..33\\\\non x=-44..5,y=-27..21,z=-14..35\\\\non x=-49..-1,y=-11..42,z=-10..38\\\\non \\\" {:nextjournal/value {:path [], :count 2858, :offset 100, :remaining 2758}, :nextjournal/viewer :elision}], :replace-path [0], :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(def real-input (slurp (io/resource \\\"day22.txt\\\")))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value [\\\"on x=-22..32,y=-14..30,z=-17..31\\\\non x=-4..46,y=-21..23,z=-37..8\\\\non x=-49..0,y=-27..19,z=-11..42\\\\non x\\\" {:nextjournal/value {:path [], :count 20826, :offset 100, :remaining 20726}, :nextjournal/viewer :elision}], :replace-path [0], :nextjournal/viewer {:pred #function+ \\\"ojure.core$string_QMARK___5427 0x3704122f \\\\\\\"clojure.core$string_QMARK___5427@3704122f\\\\\\\"\\\", :fn #function+ v/string-viewer, :fetch-opts {:n 100}}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \" ### Parsing the input\\n\", :nextjournal/viewer :markdown} {:nextjournal/value \"(def range-pattern\\n  #\\\"^(on|off)\\\\sx=(\\\\-?\\\\d+)..(\\\\-?\\\\d+),y=(\\\\-?\\\\d+)..(\\\\-?\\\\d+),z=(\\\\-?\\\\d+)..(\\\\-?\\\\d+)$\\\")\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value #\\\"^(on|off)\\\\sx=(\\\\-?\\\\d+)..(\\\\-?\\\\d+),y=(\\\\-?\\\\d+)..(\\\\-?\\\\d+),z=(\\\\-?\\\\d+)..(\\\\-?\\\\d+)$\\\", :nextjournal/viewer nil}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn parse-input\\n  [input]\\n  (map (fn [line]\\n         (let [[[_ op & limits]] (re-seq range-pattern (string/trim line))\\n               [xmin xmax ymin ymax zmin zmax] (map #(Long/valueOf %) limits)]\\n           {:cuboid/negative? (= op \\\"off\\\")\\n            :cuboid/xs [xmin xmax]\\n            :cuboid/ys [ymin ymax]\\n            :cuboid/zs [zmin zmax]}))\\n       (string/split-lines input)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day22$parse_input 0x46beca3f \\\\\\\"advent_of_code_2021.day22$parse_input@46beca3f\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(spec/def ::cuboid\\n  (spec/keys :req [:cuboid/negative?\\n                   :cuboid/xs\\n                   :cuboid/ys\\n                   :cuboid/zs]))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value :advent-of-code-2021.day22/cuboid, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(spec/def ::interval (spec/tuple int? int?))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value :advent-of-code-2021.day22/interval, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(spec/def :cuboid/negative? boolean?)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value :cuboid/negative?, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(spec/def :cuboid/xs ::interval)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value :cuboid/xs, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(spec/def :cuboid/ys ::interval)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value :cuboid/ys, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(spec/def :cuboid/zs ::interval)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value :cuboid/zs, :nextjournal/viewer {:pred #function+ \\\"ojure.core$keyword_QMARK_ 0x2f48adcc \\\\\\\"clojure.core$keyword_QMARK_@2f48adcc\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-keyword.inspected-value (str x)]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \" ### Cuboid Operations\\n\", :nextjournal/viewer :markdown} {:nextjournal/value \"(defn cuboid-volume\\n  [{n? :cuboid/negative?\\n    [xmin xmax] :cuboid/xs\\n    [ymin ymax]:cuboid/ys\\n    [zmin zmax] :cuboid/zs}]\\n  (* (if n? -1 1) (- (inc xmax) xmin) (- (inc ymax) ymin) (- (inc zmax) zmin)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day22$cuboid_volume 0x22690f1e \\\\\\\"advent_of_code_2021.day22$cuboid_volume@22690f1e\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn interval-overlaps?\\n  [[a-min a-max] [b-min b-max]]\\n  (not (or (< a-max b-min) (< b-max a-min))))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day22$interval_overlaps_QMARK_ 0x41917eb0 \\\\\\\"advent_of_code_2021.day22$interval_overlaps_QMARK_@41917eb0\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn cuboid-overlaps?\\n  [{axs :cuboid/xs ays :cuboid/ys azs :cuboid/zs}\\n   {bxs :cuboid/xs bys :cuboid/ys bzs :cuboid/zs}]\\n  (and (interval-overlaps? axs bxs)\\n       (interval-overlaps? ays bys)\\n       (interval-overlaps? azs bzs)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day22$cuboid_overlaps_QMARK_ 0x39a15b05 \\\\\\\"advent_of_code_2021.day22$cuboid_overlaps_QMARK_@39a15b05\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn interval-intersection\\n  [[a-min a-max :as a] [b-min b-max :as b]]\\n  (when (interval-overlaps? a b) \\n    (let [[a b c d] (sort [a-min a-max b-min b-max])]\\n      [b c])))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day22$interval_intersection 0x97e813c \\\\\\\"advent_of_code_2021.day22$interval_intersection@97e813c\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn cuboid-intersection\\n  [{axs :cuboid/xs ays :cuboid/ys azs :cuboid/zs}\\n   {bxs :cuboid/xs bys :cuboid/ys bzs :cuboid/zs}]\\n  (let [xs (interval-intersection axs bxs)\\n        ys (interval-intersection ays bys)\\n        zs (interval-intersection azs bzs)]\\n    (if (and (some? xs) (some? ys) (some? zs))\\n      {:cuboid/xs xs\\n       :cuboid/ys ys \\n       :cuboid/zs zs})))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day22$cuboid_intersection 0x63856ef2 \\\\\\\"advent_of_code_2021.day22$cuboid_intersection@63856ef2\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \" ### Processing Functions\\n\", :nextjournal/viewer :markdown} {:nextjournal/value \"(defn overlap-xform\\n  [cuboid]\\n  (comp (filter #(cuboid-overlaps? cuboid %))\\n        (map (fn [{n? :cuboid/negative? :as c}]\\n               (-> (cuboid-intersection cuboid c)\\n                   (assoc :cuboid/negative? (not n?)))))))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day22$overlap_xform 0x29abe8cc \\\\\\\"advent_of_code_2021.day22$overlap_xform@29abe8cc\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn process-cuboids\\n  [cuboids]\\n  (reduce (fn [cs {n? :cuboid/negative? :as cuboid}]\\n            (let [ncs (into cs (overlap-xform cuboid) cs)]\\n              (if n? ncs (conj ncs cuboid))))\\n          []\\n          cuboids))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day22$process_cuboids 0x1ae1f78f \\\\\\\"advent_of_code_2021.day22$process_cuboids@1ae1f78f\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn sum-volumes\\n  [cuboids]\\n  (transduce (map cuboid-volume) + cuboids))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day22$sum_volumes 0x676bf28e \\\\\\\"advent_of_code_2021.day22$sum_volumes@676bf28e\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \" ### Solution Functions\\n\", :nextjournal/viewer :markdown} {:nextjournal/value \"(defn solve-part1\\n  [input]\\n  (->> (parse-input input)\\n       (filter (fn [{[x-min x-max] :cuboid/xs\\n                     [y-min y-max] :cuboid/ys\\n                     [z-min z-max] :cuboid/zs}]\\n                 (and (<= -50 x-min x-max 50)\\n                      (<= -50 y-min y-max 50)\\n                      (<= -50 z-min z-max 50))))\\n       (process-cuboids)\\n       (sum-volumes)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day22$solve_part1 0x2f51f26f \\\\\\\"advent_of_code_2021.day22$solve_part1@2f51f26f\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(solve-part1 test-input)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value 39, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(solve-part1 test-input2)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value 590784, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(solve-part1 test-input3)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value 474140, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(solve-part1 real-input)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value 568000, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(defn solve-part2\\n  [input]\\n  (->> (parse-input input)\\n       (process-cuboids)  \\n       (sum-volumes)))\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value \\\"vent_of_code_2021.day22$solve_part2 0x594a82c1 \\\\\\\"advent_of_code_2021.day22$solve_part2@594a82c1\\\\\\\"\\\", :nextjournal/viewer {:pred #function+ \\\"ojure.core$fn_QMARK_ 0x64e6f678 \\\\\\\"clojure.core$fn_QMARK_@64e6f678\\\\\\\"\\\", :name :fn, :fn #function+ (fn [x] (v/html [:span.inspected-value [:span.syntax-tag \\\"#function\\\"] \\\"[\\\" x \\\"]\\\"]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(solve-part2 test-input)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value 39, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(solve-part2 test-input2)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value 39769202357779, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(solve-part2 test-input3)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value 2758514936282235, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}}\"}, :nextjournal/viewer :clerk/inline-result} {:nextjournal/value \"(solve-part2 real-input)\", :nextjournal/viewer :code} {:nextjournal/value {:edn \"{:path [], :nextjournal/value 1177411289280259, :nextjournal/viewer {:pred #function+ \\\"ojure.core$number_QMARK_ 0x2c7fb24c \\\\\\\"clojure.core$number_QMARK_@2c7fb24c\\\\\\\"\\\", :fn #function+ (fn [x] (v/html [:span.syntax-number.inspected-value (if (js/Number.isNaN x) \\\"NaN\\\" (str x))]))}}\"}, :nextjournal/viewer :clerk/inline-result}], :nextjournal/viewer :clerk/notebook, :scope {:namespace :advent-of-code-2021.day22}}"
viewer.reset_doc(viewer.read_string(doc))
viewer.mount(document.getElementById('clerk'))
</script></body></html>